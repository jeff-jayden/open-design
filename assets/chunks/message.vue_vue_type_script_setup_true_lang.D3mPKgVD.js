import{p,h as c,d as B,v as V,b as I,w as d,T as b,o as x,a5 as D,a6 as E,j as T,k as u,e as $,c as N,G as m,a0 as F,n as L,N as j,a7 as A,a as g,F as G}from"./framework.DDoBidLl.js";import{_ as H}from"./index.CKV4KJOu.js";import{R as W}from"./RenderVnode.B5EX5Ezg.js";import{_ as v}from"./index.B6vsphRD.js";const w=p(0),q=(n=2e3)=>{const e=p(n),s=c(()=>w.value+e.value);return{currentZIndex:s,nextZIndex:()=>(w.value++,s.value),initialZIndex:e}},J=["id"],K={class:"open-message__content"},P={key:0,class:"open-message__close"},i=B({name:"OpenMessage",__name:"message",props:{message:{},type:{default:"info"},showClose:{type:Boolean},duration:{default:3e3},center:{type:Boolean},onClose:{},id:{},zIndex:{},offset:{default:16},onDestory:{}},setup(n,{expose:e}){const s=n,o=p(),r=p(0),l=p(!1);let t;const y=()=>{l.value=!1};function C(){s.duration!==0&&(t=setTimeout(()=>{y()},s.duration))}function Z(){clearTimeout(t)}function M(){r.value=o.value.getBoundingClientRect().height}const h=c(()=>U(s.id)),_=c(()=>X(s.id,s.offset)+h.value);console.log(`offset${_.value} ${h.value}`);const{currentZIndex:z,nextZIndex:Y}=q(),O=c(()=>({top:`${_.value}px`,zIndex:z.value})),R=c(()=>r.value+_.value);function S(){s.onDestory()}return V(()=>{C(),l.value=!0}),e({visible:l,bottom:R,close:y}),(a,k)=>(x(),I(b,{name:"fade-up",onEnter:M,onAfterLeave:S},{default:d(()=>[D(T("div",{ref_key:"messageRef",ref:o,id:a.id,onMouseenter:Z,onMouseleave:C,class:L([{[`open-message--${a.type}`]:a.type,"is-close":a.showClose,center:a.center},"open-message"]),style:j(O.value)},[T("div",K,[a.message?(x(),I(u(W),{key:0,vNode:a.message},null,8,["vNode"])):$("",!0)]),a.showClose?(x(),N("div",P,[m(u(H),{icon:"xmark",onClick:k[0]||(k[0]=F(ee=>l.value=!1,["stop"]))})])):$("",!0)],46,J),[[E,l.value]])]),_:1}))}}),f=A([]),Q=n=>{const e=f.findIndex(r=>r.id===n);console.log(`11111idx${e}`),console.log(`instances${f.length}`);const s=f[e];let o;return e>0&&(o=f[e-1]),{current:s,prev:o}},U=n=>{const{prev:e}=Q(n);return e?e.vm.exposed.bottom.value:(console.log("没有prev"),0)},X=(n,e)=>{const s=f.findIndex(o=>o.id===n);return console.log(`这里的：${s}`),s>0?16:e};i.install=n=>{n.component(i.name,i)};const ae=B({__name:"message",setup(n){const e=()=>{i({message:"This is a message.",type:"success"})},s=()=>{i({message:"This is a message.",type:"warning"})},o=()=>{i({message:"This is a message.",type:"info"})},r=()=>{i({message:"This is a message.",type:"danger"})};return(l,t)=>(x(),N(G,null,[m(u(v),{plain:"",onClick:e},{default:d(()=>t[0]||(t[0]=[g("Success")])),_:1}),m(u(v),{plain:"",onClick:s},{default:d(()=>t[1]||(t[1]=[g("Warning")])),_:1}),m(u(v),{plain:"",onClick:o},{default:d(()=>t[2]||(t[2]=[g("Message")])),_:1}),m(u(v),{plain:"",onClick:r},{default:d(()=>t[3]||(t[3]=[g("Error")])),_:1})],64))}});export{ae as _};

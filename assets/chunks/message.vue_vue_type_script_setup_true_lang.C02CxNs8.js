import{p as f,h as c,d as w,v as S,b as k,o as v,w as u,ao as V,j as I,N as b,n as D,c as $,e as T,k as r,G as d,a0 as E,ap as F,T as L,aq as j,F as q,a as g}from"./framework.Dg_YdSV9.js";import{_ as A}from"./index.Cs7zQyVH.js";import{R as G}from"./RenderVnode.DBxJ6fEB.js";import{_ as p}from"./index.B5u16nae.js";const _=f(0),H=(e=2e3)=>{const s=f(e),n=c(()=>_.value+s.value);return{currentZIndex:n,nextZIndex:()=>(_.value++,n.value),initialZIndex:s}},W=["id"],J={class:"open-message__content"},K={key:0,class:"open-message__close"},a=w({name:"OpenMessage",__name:"message",props:{message:{},type:{default:"info"},showClose:{type:Boolean},duration:{default:3e3},center:{type:Boolean},onClose:{},id:{},zIndex:{},offset:{default:16},onDestory:{}},setup(e,{expose:s}){const n=e,o=f(),i=f(0),l=f(!1);let t;const x=()=>{l.value=!1};function y(){n.duration!==0&&(t=setTimeout(()=>{x()},n.duration))}function B(){clearTimeout(t)}function N(){i.value=o.value.getBoundingClientRect().height}const M=c(()=>Q(n.id)),C=c(()=>U(n.id,n.offset)+M.value),{currentZIndex:Z}=H(),z=c(()=>({top:`${C.value}px`,zIndex:Z.value})),O=c(()=>i.value+C.value);function R(){n.onDestory()}return S(()=>{y(),l.value=!0}),s({visible:l,bottom:O,close:x}),(X,h)=>(v(),k(L,{name:"fade-up",onEnter:N,onAfterLeave:R},{default:u(()=>[V(I("div",{ref_key:"messageRef",ref:o,id:e.id,class:D(["open-message",{[`open-message--${e.type}`]:e.type,"is-close":e.showClose,center:e.center}]),style:b(z.value),onMouseenter:B,onMouseleave:y},[I("div",J,[e.message?(v(),k(r(G),{key:0,vNode:e.message},null,8,["vNode"])):T("",!0)]),e.showClose?(v(),$("div",K,[d(r(A),{icon:"xmark",onClick:h[0]||(h[0]=E(Y=>l.value=!1,["stop"]))})])):T("",!0)],46,W),[[F,l.value]])]),_:1}))}}),m=j([]),P=e=>{const s=m.findIndex(i=>i.id===e);console.log(`11111idx${s}`),console.log(`instances${m.length}`);const n=m[s];let o;return s>0&&(o=m[s-1]),{current:n,prev:o}},Q=e=>{const{prev:s}=P(e);return s?s.vm.exposed.bottom.value:(console.log("没有prev"),0)},U=(e,s)=>{const n=m.findIndex(o=>o.id===e);return console.log(`这里的：${n}`),n>0?16:s};a.install=e=>{e.component(a.name,a)};const oe=w({__name:"message",setup(e){const s=()=>{a({message:"This is a message.",type:"success"})},n=()=>{a({message:"This is a message.",type:"warning"})},o=()=>{a({message:"This is a message.",type:"info"})},i=()=>{a({message:"This is a message.",type:"danger"})};return(l,t)=>(v(),$(q,null,[d(r(p),{plain:"",onClick:s},{default:u(()=>[...t[0]||(t[0]=[g("Success",-1)])]),_:1}),d(r(p),{plain:"",onClick:n},{default:u(()=>[...t[1]||(t[1]=[g("Warning",-1)])]),_:1}),d(r(p),{plain:"",onClick:o},{default:u(()=>[...t[2]||(t[2]=[g("Message",-1)])]),_:1}),d(r(p),{plain:"",onClick:i},{default:u(()=>[...t[3]||(t[3]=[g("Error",-1)])]),_:1})],64))}});export{oe as _};
